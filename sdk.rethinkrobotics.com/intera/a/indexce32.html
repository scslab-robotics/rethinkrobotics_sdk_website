<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from sdk.rethinkrobotics.com/intera/a/index.php?title=Joint_Torque_Springs_Example&oldid=1172 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 18 Oct 2019 05:23:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Joint Torque Springs Example - Intera SDK</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Joint_Torque_Springs_Example","wgTitle":"Joint Torque Springs Example","wgCurRevisionId":1172,"wgRevisionId":1172,"wgArticleId":66,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Joint_Torque_Springs_Example","wgRelevantArticleId":66,"wgRequestId":"920d941c53df1a13c7c88cbd","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","site":"ready","user.options":"ready","user.tokens":"loading","ext.pygments":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.cavendishrr":"ready"});mw.loader.implement("user.tokens@09sx7ae",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","cavendishrr.html","app.js"]);});</script>
<link rel="stylesheet" href="load8c61.css?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cskins.cavendishrr&amp;only=styles&amp;skin=cavendishrr"/>
<script async="" src="loada191.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=cavendishrr"></script>
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,300italic,400,500,500italic,700|Roboto+Condensed:300,700|Open+Sans:300"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load8ac3.css?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=cavendishrr"/>
<meta name="generator" content="MediaWiki 1.31.0"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="shortcut icon" href="http://sdk.rethinkrobotics.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://sdk.rethinkrobotics.com/intera/a/opensearch_desc.php" title="Intera SDK (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="http://sdk.rethinkrobotics.com/intera/a/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="Intera SDK Atom feed" href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/intera/a/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=CavendishRR&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Joint_Torque_Springs_Example rootpage-Joint_Torque_Springs_Example skin-cavendishrr action-view"><div id="container"><!-- start fragment header -->
    <div id="header" class="noprint">
            <a name="top" id="contentTop"></a>

            <!-- Logo + site name -->
            <h1>
                <a href="http://sdk.rethinkrobotics.com/intera/Main_Page" style="text-indent: 2em; width: 123px; height: 69px; background: transparent url(http://sdk.rethinkrobotics.com/intera/a/skins/CavendishRR/styles/images/header_logo.png) no-repeat scroll;" title="Visit the main page">&nbsp;</a>            </h1>

            <div id="rr_ActionWrap">
                <!-- Account action links -->
                <div id="accountActions"><a href="http://sdk-accounts.rethinkrobotics.com/public/NewUser">Create account</a><a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Special:UserLogin&amp;returnto=Joint+Torque+Springs+Example&amp;returntoquery=oldid%3D1172">Log in</a></div>                <!-- Search box -->
                        <form action="http://sdk.rethinkrobotics.com/intera/a/index.php" id="searchform">
            <label for="searchInput">Search</label>
            <input type='hidden' name="title" value="Special:Search"/>
            <input type="search" name="search" placeholder="Search Intera SDK" title="Search Intera SDK [f]" accesskey="f" id="searchInput"/>
                            <button type="submit" name="button">Search</button>        </form>
                </div><!--/#rr_ActionWrap-->
    </div> <!-- End header div -->
<!-- end fragment header --><div id="mBody"><!-- start fragment mainContent -->
<!-- start fragment firstHeader -->
<div id="firstHeadingDiv" class="firstHeading">
    <div class="l-container">
        <!-- Content action buttons -->
                <ul class="m-cactions">
            <li><a href="#">More</a>
                <ul>
                <li id="ca-viewsource"><a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Joint_Torque_Springs_Example&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li id="ca-history"><a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Joint_Torque_Springs_Example&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>                </ul>
            </li>

            <li id="ca-nstab-main" class="selected"><a href="http://sdk.rethinkrobotics.com/intera/Joint_Torque_Springs_Example" title="View the content page [c]" accesskey="c">Page</a></li>        </ul>
        
        <h1 lang="en">
            <span dir="auto">Joint Torque Springs Example</span>
        </h1>
    </div><!--/.l-container-->
</div><!--/#firstHeadingDiv-->
<!-- end fragment firstHeader -->
<div class="bg-wrapper clearfix">
    <!-- start fragment sidebar -->
    <div id="side" class="noprint" > <!-- cavendishmw: s/column-one/side/ -->
        <ul id="nav">
                  <li>
          <span>Installation &amp; Configuration</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-Robot-Setup"><a href="http://sdk.rethinkrobotics.com/intera/Robot_Setup">Robot Setup</a></li>                                    <li id="n-Workstation-Setup"><a href="http://sdk.rethinkrobotics.com/intera/Workstation_Setup">Workstation Setup</a></li>                                    <li id="n-Networking"><a href="http://sdk.rethinkrobotics.com/intera/Networking">Networking</a></li>                                    <li id="n-Hello-Robot.21"><a href="http://sdk.rethinkrobotics.com/intera/Hello_Robot">Hello Robot!</a></li>                                    <li id="n-Hardware-Components"><a href="http://sdk.rethinkrobotics.com/intera/Hardware_Components">Hardware Components</a></li>                                    <li id="n-SDK-Workstation-Requirements"><a href="http://sdk.rethinkrobotics.com/intera/System_requirements">SDK Workstation Requirements</a></li>                                    <li id="n-Robot-Workspace-Guidelines"><a href="http://sdk.rethinkrobotics.com/intera/Workspace_Guidelines">Robot Workspace Guidelines</a></li>                                    <li id="n-Field-Service-Menu-.28FSM.29"><a href="http://sdk.rethinkrobotics.com/intera/Field_Service_Menu_(FSM)">Field Service Menu (FSM)</a></li>                                    <li id="n-Time-and-NTP"><a href="http://sdk.rethinkrobotics.com/intera/Time_and_NTP">Time and NTP</a></li>                                    <li id="n-SDK-Software-Update"><a href="http://sdk.rethinkrobotics.com/intera/Software_Update">SDK Software Update</a></li>                                    <li id="n-SDK-Release-Notes"><a href="http://sdk.rethinkrobotics.com/intera/Release-Changes">SDK Release Notes</a></li>                            </ul>
                </li>
          <li>
          <span>Concepts</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-SDK-Robot-Workstation-Overview"><a href="http://sdk.rethinkrobotics.com/intera/SDK_System_Overview">SDK Robot-Workstation Overview</a></li>                                    <li id="n-E-STOP-and-Enable-Robot"><a href="http://sdk.rethinkrobotics.com/intera/E-STOP_and_Enable_Robot">E-STOP and Enable Robot</a></li>                                    <li id="n-Arm-Calibration"><a href="http://sdk.rethinkrobotics.com/intera/Arm_Calibration">Arm Calibration</a></li>                                    <li id="n-Arm-Control-Systems"><a href="http://sdk.rethinkrobotics.com/intera/Arm_Control_Systems">Arm Control Systems</a></li>                                    <li id="n-API-Reference"><a href="http://sdk.rethinkrobotics.com/intera/API_Reference">API Reference</a></li>                            </ul>
                </li>
          <li>
          <span>Tutorials</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-Interaction-Control-Tutorial"><a href="http://sdk.rethinkrobotics.com/intera/Interaction_Control_Tutorial">Interaction Control Tutorial</a></li>                                    <li id="n-Motion-Interface-Tutorial"><a href="http://sdk.rethinkrobotics.com/intera/Motion_Interface_Tutorial">Motion Interface Tutorial</a></li>                                    <li id="n-MoveIt.21-Tutorial"><a href="http://sdk.rethinkrobotics.com/intera/MoveIt_Tutorial">MoveIt! Tutorial</a></li>                                    <li id="n-Gazebo-Tutorial"><a href="http://sdk.rethinkrobotics.com/intera/Gazebo_Tutorial">Gazebo Tutorial</a></li>                            </ul>
                </li>
          <li>
          <span>Code Examples</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-Running-Examples-Overview"><a href="http://sdk.rethinkrobotics.com/intera/Running_Examples_Overview">Running Examples Overview</a></li>                                    <li id="n-Camera-Image-Display-Example"><a href="http://sdk.rethinkrobotics.com/intera/Camera_Image_Display_Example">Camera Image Display Example</a></li>                                    <li id="n-Gripper-Example"><a href="http://sdk.rethinkrobotics.com/intera/Gripper_Example">Gripper Example</a></li>                                    <li id="n-Gripper-Cuff-Control-Example"><a href="http://sdk.rethinkrobotics.com/intera/Gripper_Cuff_Control_Example">Gripper Cuff Control Example</a></li>                                    <li id="n-Head-Display-Image-Example"><a href="http://sdk.rethinkrobotics.com/intera/Head_Display_Image_Example">Head Display Image Example</a></li>                                    <li id="n-Head-Movement-Example"><a href="http://sdk.rethinkrobotics.com/intera/Head_Movement_Example">Head Movement Example</a></li>                                    <li id="n-Lights-Blinking-Example"><a href="http://sdk.rethinkrobotics.com/intera/Lights_Blinking_Example">Lights Blinking Example</a></li>                                    <li id="n-IK-Service-Example"><a href="http://sdk.rethinkrobotics.com/intera/IK_Service_Example">IK Service Example</a></li>                                    <li id="n-Joint-Position-Example"><a href="http://sdk.rethinkrobotics.com/intera/Joint_Position_Example">Joint Position Example</a></li>                                    <li id="n-Joint-Position-Waypoint-Example"><a href="http://sdk.rethinkrobotics.com/intera/Joint_Position_Waypoint_Example">Joint Position Waypoint Example</a></li>                                    <li id="n-Joint-Torque-Springs-Example"><a href="http://sdk.rethinkrobotics.com/intera/Joint_Torque_Springs_Example">Joint Torque Springs Example</a></li>                                    <li id="n-Joint-Trajectory-Playback-Example"><a href="http://sdk.rethinkrobotics.com/intera/Joint_Trajectory_Playback_Example">Joint Trajectory Playback Example</a></li>                                    <li id="n-Set-Interaction-Options-Example"><a href="http://sdk.rethinkrobotics.com/intera/Set_Interaction_Options_Example">Set Interaction Options Example</a></li>                                    <li id="n-Motion-Interface-Go-To-Joint-Angles"><a href="http://sdk.rethinkrobotics.com/intera/Go_To_Joint_Angles_Example">Motion Interface Go-To-Joint Angles</a></li>                            </ul>
                </li>
          <li>
          <span>Support</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-User-Forum"><a href="http://sdk.rethinkrobotics.com/intera/User_Forum">User Forum</a></li>                            </ul>
                </li>
          <li>
          <span>Tools</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-All-Pages"><a href="http://sdk.rethinkrobotics.com/intera/Special:AllPages">All Pages</a></li>                                    <li id="n-Print"><a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Joint_Torque_Springs_Example&amp;printable=yes" rel="nofollow">Print</a></li>                                    <li id="n-Upload-File"><a href="http://sdk.rethinkrobotics.com/intera/Special:Upload">Upload File</a></li>                                    <li id="n-What-Links-Here.3F"><a href="http://sdk.rethinkrobotics.com/intera/Special:WhatLinksHere">What Links Here?</a></li>                            </ul>
                </li>
            </ul> <!-- /nav -->
    </div> <!-- /side -->
<!-- end fragment sidebar -->
    <div id="mainContent"> <!-- cavendishmw: s/column-content/mainContent/ -->
        
        <div id="bodyContent" class="mw-body">

            <div id="contentSub">
                <div class="mw-revision"><div id="mw-revision-info">Revision as of 20:41, 16 January 2017 by <a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=User:Swang&amp;action=edit&amp;redlink=1" class="new mw-userlink" title="User:Swang (page does not exist)"><bdi>Swang</bdi></a> <span class="mw-usertoollinks">(<a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=User_talk:Swang&amp;action=edit&amp;redlink=1" class="new mw-usertoollinks-talk" title="User talk:Swang (page does not exist)">talk</a> | <a href="http://sdk.rethinkrobotics.com/intera/Special:Contributions/Swang" class="mw-usertoollinks-contribs" title="Special:Contributions/Swang">contribs</a>)</span></div><div id="mw-revision-nav">(<a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Joint_Torque_Springs_Example&amp;diff=prev&amp;oldid=1172" title="Joint Torque Springs Example">diff</a>) <a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Joint_Torque_Springs_Example&amp;direction=prev&amp;oldid=1172" title="Joint Torque Springs Example">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>            </div>

            
            
                            <div id="jump-to-nav" class="mw-jump">
                    Jump to:                    <a href="#column-one">navigation</a>
                    ,                     <a href="#searchInput">search</a>
                </div>
            
            <!-- start content -->
            <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div class="title-block">
<p><span style="font-size:120%;"><b>This example shows joint torque control usage. After moving to neutral, the robot will enter torque control mode, applying torques representing virtual springs holding the joints to their start position. The example calculates and applies torques linearly relative to offset from the start position creating the illusion that springs of configurable stiffness are attached to each joint.</b></span>
</p>
</div>
<div class="toclimit-2"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Arguments"><span class="tocnumber">3</span> <span class="toctext">Arguments</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Code_Walkthrough"><span class="tocnumber">4</span> <span class="toctext">Code Walkthrough</span></a></li>
</ul>
</div>
</div>
<div class="content-block">
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>The Joint Torque Springs Example demonstrates the usage of torque controller to apply torque commands to robot's joints. In the <code>main()</code> function, the dynamic reconfigure from server is initialized and passed to an object of the <code>JointSprings</code> class. On initialization, the object creates an instance of the <code>limb</code> class for the particular side that is passed, and captures the default spring and damping constants from the dynamic reconfigure server. The <code>main()</code> function calls the method, <code>move_to_neutral()</code> to send the limbs to a neutral position. Then, <code>the attach_spring()</code> method captures the initial joint angles of the limb and calls the <code>update_forces()</code> method which calculates the necessary torques based on Hooke's law and publishes them as joint commands.
</p><p><b>Interfaces - </b>
</p>
<div style="column-count:3;-moz-column-count:3;-webkit-column-count:3">
<ul><li>Limb.set_joint_torques()</li>
<li>Limb.move_to_neutral()</li>
<li>Limb.joint_angles()</li>
<li>Limb.joint_velocities()</li>
<li>Limb.set_command_timeout()</li>
<li>Limb.exit_control_mode()</li></ul>
</div>
<p>If you would like to follow along with the actual source code for the example on GitHub, it can be found through <a rel="nofollow" class="external text" href="https://github.com/RethinkRobotics/intera_sdk/blob/master/intera_examples/scripts/joint_torque_springs.py">this link</a> for joint torque spring example.
</p>
</div>
<div class="content-block">
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>Start the joint torque springs example from an RSDK terminal session using:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>$ rosrun intera_examples joint_torque_springs.py
</pre></div>
<p>Messages will appear after start:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>Initializing node...
Getting robot state...
Enabling robot...
Running. Ctrl-c to quit
</pre></div>
<p>The robot will move to neutral pose first, when done moving to neutral pose, you can interact with the robot by grabbing, pushing, and rotating each joint to feel the torques applied that represent the virtual springs attached.
</p><p>Pressing <code> Control-C </code> at any time will stop torque mode and exit the example.
</p>
</div>
<div class="content-block">
<h2><span class="mw-headline" id="Arguments">Arguments</span></h2>
<p><b>Important Arguments:</b>  
</p><p><code> -l </code> or <code> --limb </code>: The robot arm name (default="right")
</p><p>See the joint torque spring's available arguments on the command line by passing joint_torque_springs.py the <code>-h</code>, help argument:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>$ rosrun intera_examples joint_torque_springs.py -h
</pre></div>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>usage: joint_torque_springs.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-l LIMB<span class="o">]</span>

RSDK Joint Torque Example: Joint Springs

    Moves the default limb to a neutral location and enters
    torque control mode, attaching virtual springs <span class="o">(</span>Hooke.s Law<span class="o">)</span>
    to each joint maintaining the start position.

    Run this example and interact by grabbing, pushing, and rotating
    each joint to feel the torques applied that represent the
    virtual springs attached. You can adjust the spring
    constant and damping coefficient <span class="k">for</span> each joint using
    dynamic_reconfigure.
    

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -l LIMB, --limb LIMB
                        limb on which to attach joint springs
</pre></div>
</div>
<div class="content-block">
<h2><span class="mw-headline" id="Code_Walkthrough">Code Walkthrough</span></h2>
<p>Now, let's break down the code.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">33 </span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="lineno">34 </span><span class="kn">import</span> <span class="nn">importlib</span>
<span class="lineno">35 </span>
<span class="lineno">36 </span><span class="kn">import</span> <span class="nn">rospy</span>
<span class="lineno">37 </span><span class="kn">from</span> <span class="nn">dynamic_reconfigure.server</span> <span class="kn">import</span> <span class="p">(</span>
<span class="lineno">38 </span>    <span class="n">Server</span><span class="p">,</span>
<span class="lineno">39 </span><span class="p">)</span>
<span class="lineno">40 </span><span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="p">(</span>
<span class="lineno">41 </span>    <span class="n">Empty</span><span class="p">,</span>
<span class="lineno">42 </span><span class="p">)</span>
<span class="lineno">43 </span>
<span class="lineno">44 </span><span class="kn">import</span> <span class="nn">intera_interface</span>
<span class="lineno">45 </span><span class="kn">from</span> <span class="nn">intera_interface</span> <span class="kn">import</span> <span class="n">CHECK_VERSION</span>
</pre></div>
<p>This imports the intera interface for accessing the limb class. The <code>CHECK_VERSION</code> is imported to check if the software running on the robot would be compatible with this local version. It is not necessary to check the version in custom programs.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">43 </span><span class="k">class</span> <span class="nc">JointSprings</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="lineno">44 </span>    <span class="sd">&quot;&quot;&quot;</span>
<span class="lineno">45 </span><span class="sd">    Virtual Joint Springs class for torque example.</span>
<span class="lineno">46 </span>
<span class="lineno">47 </span><span class="sd">    @param limb: limb on which to run joint springs example</span>
<span class="lineno">48 </span><span class="sd">    @param reconfig_server: dynamic reconfigure server</span>
<span class="lineno">49 </span>
<span class="lineno">50 </span><span class="sd">    JointSprings class contains methods for the joint torque example allowing</span>
<span class="lineno">51 </span><span class="sd">    moving the limb to a neutral location, entering torque mode, and attaching</span>
<span class="lineno">52 </span><span class="sd">    virtual springs.</span>
<span class="lineno">53 </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="lineno">54 </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reconfig_server</span><span class="p">,</span> <span class="n">limb</span> <span class="o">=</span> <span class="s2">&quot;right&quot;</span><span class="p">):</span>
<span class="lineno">55 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_dyn</span> <span class="o">=</span> <span class="n">reconfig_server</span>
<span class="lineno">56 </span>
<span class="lineno">57 </span>        <span class="c1"># control parameters</span>
<span class="lineno">58 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span> <span class="o">=</span> <span class="mf">1000.0</span>  <span class="c1"># Hz</span>
<span class="lineno">59 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_missed_cmds</span> <span class="o">=</span> <span class="mf">20.0</span>  <span class="c1"># Missed cycles before triggering timeout</span>
<span class="lineno">60 </span>
<span class="lineno">61 </span>        <span class="c1"># create our limb instance</span>
<span class="lineno">62 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_limb</span> <span class="o">=</span> <span class="n">intera_interface</span><span class="o">.</span><span class="n">Limb</span><span class="p">(</span><span class="n">limb</span><span class="p">)</span>
<span class="lineno">63 </span>
<span class="lineno">64 </span>        <span class="c1"># initialize parameters</span>
<span class="lineno">65 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_springs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="lineno">66 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_damping</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="lineno">67 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_start_angles</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</pre></div>
<p>The <code>JointSprings</code> class object is initialized by passing the side of the limb under interest, an object of the reconfigure server that holds the default spring and damping constants for the limb. These default values can be modified at runtime through the dynamic reconfigure server.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">69 </span>        <span class="c1"># create cuff disable publisher</span>
<span class="lineno">70 </span>        <span class="n">cuff_ns</span> <span class="o">=</span> <span class="s1">&#39;robot/limb/&#39;</span> <span class="o">+</span> <span class="n">limb</span> <span class="o">+</span> <span class="s1">&#39;/suppress_cuff_interaction&#39;</span>
<span class="lineno">71 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_pub_cuff_disable</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">cuff_ns</span><span class="p">,</span> <span class="n">Empty</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="lineno">72 </span>
<span class="lineno">73 </span>        <span class="c1"># verify robot is enabled</span>
<span class="lineno">74 </span>        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Getting robot state... &quot;</span><span class="p">)</span>
<span class="lineno">75 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_rs</span> <span class="o">=</span> <span class="n">intera_interface</span><span class="o">.</span><span class="n">RobotEnable</span><span class="p">(</span><span class="n">CHECK_VERSION</span><span class="p">)</span>
<span class="lineno">76 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_init_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rs</span><span class="o">.</span><span class="n">state</span><span class="p">()</span><span class="o">.</span><span class="n">enabled</span>
<span class="lineno">77 </span>        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enabling robot... &quot;</span><span class="p">)</span>
<span class="lineno">78 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_rs</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
<span class="lineno">79 </span>        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Running. Ctrl-c to quit&quot;</span><span class="p">)</span>
</pre></div>
<p>The zero gravity mode can be enabled by pressing the cuff and so it is important to disable the cuff. A publisher for the cuff interaction suppress topic is created. It is also important to note that the robot should be enabled before trying to manipulate its joints. So, the robot is checked if it is enabled and if not, it is enabled. The initial state of the variable is recorded in <code>_init_state</code> variable. This is to ensure that the robot is sent back to that state once the example program ends.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">81 </span>    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="lineno">82 </span>        <span class="k">for</span> <span class="n">joint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_limb</span><span class="o">.</span><span class="n">joint_names</span><span class="p">():</span>
<span class="lineno">83 </span>            <span class="bp">self</span><span class="o">.</span><span class="n">_springs</span><span class="p">[</span><span class="n">joint</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dyn</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">joint</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">+</span> <span class="s1">&#39;_spring_stiffness&#39;</span><span class="p">]</span>
<span class="lineno">84 </span>            <span class="bp">self</span><span class="o">.</span><span class="n">_damping</span><span class="p">[</span><span class="n">joint</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dyn</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">joint</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">+</span> <span class="s1">&#39;_damping_coefficient&#39;</span><span class="p">]</span>
</pre></div>
<p>The <code>_update_parameters()</code> method captures the dynamically entered user's input for the spring and damping constants through the dynamic reconfigure server.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">86 </span>    <span class="k">def</span> <span class="nf">_update_forces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="lineno">87 </span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="lineno">88 </span><span class="sd">        Calculates the current angular difference between the start position</span>
<span class="lineno">89 </span><span class="sd">        and the current joint positions applying the joint torque spring forces</span>
<span class="lineno">90 </span><span class="sd">        as defined on the dynamic reconfigure server.</span>
<span class="lineno">91 </span><span class="sd">        &quot;&quot;&quot;</span>
<span class="lineno">92 </span>        <span class="c1"># get latest spring constants</span>
<span class="lineno">93 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
<span class="lineno">94 </span>
<span class="lineno">95 </span>        <span class="c1"># disable cuff interaction</span>
<span class="lineno">96 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_pub_cuff_disable</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>
</pre></div>
<p>The cuff interaction is disabled as long as the example runs and each time the forces are updated, the <code>_pub_cuff_disable</code> publisher publishes an empty message.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno"> 98 </span>        <span class="c1"># create our command dict</span>
<span class="lineno"> 99 </span>        <span class="n">cmd</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="lineno">100 </span>        <span class="c1"># record current angles/velocities</span>
<span class="lineno">101 </span>        <span class="n">cur_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_limb</span><span class="o">.</span><span class="n">joint_angles</span><span class="p">()</span>
<span class="lineno">102 </span>        <span class="n">cur_vel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_limb</span><span class="o">.</span><span class="n">joint_velocities</span><span class="p">()</span>
<span class="lineno">103 </span>        <span class="c1"># calculate current forces</span>
<span class="lineno">104 </span>        <span class="k">for</span> <span class="n">joint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_angles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<span class="lineno">105 </span>            <span class="c1"># spring portion</span>
<span class="lineno">106 </span>            <span class="n">cmd</span><span class="p">[</span><span class="n">joint</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_springs</span><span class="p">[</span><span class="n">joint</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_angles</span><span class="p">[</span><span class="n">joint</span><span class="p">]</span> <span class="o">-</span>
<span class="lineno">107 </span>                                                   <span class="n">cur_pos</span><span class="p">[</span><span class="n">joint</span><span class="p">])</span>
<span class="lineno">108 </span>            <span class="c1"># damping portion</span>
<span class="lineno">109 </span>            <span class="n">cmd</span><span class="p">[</span><span class="n">joint</span><span class="p">]</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_damping</span><span class="p">[</span><span class="n">joint</span><span class="p">]</span> <span class="o">*</span> <span class="n">cur_vel</span><span class="p">[</span><span class="n">joint</span><span class="p">]</span>
<span class="lineno">110 </span>        <span class="c1"># command new joint torques</span>
<span class="lineno">111 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_limb</span><span class="o">.</span><span class="n">set_joint_torques</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</pre></div>
<p>Hooke's law is applied to calculate the necessary torques to be applied on each joints. The updated spring and damping constants are used in the calculation. The <code>set_joint_torques()</code> method of the limb interface publishes the set of joint torques and their corresponding names with the mode as 3 to the topic <code>robot/limb/right/joint_command </code>. The mode indicates that the joint commands are to be passed to the torque controller.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">113 </span>    <span class="k">def</span> <span class="nf">move_to_neutral</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="lineno">114 </span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="lineno">115 </span><span class="sd">        Moves the limb to neutral location.</span>
<span class="lineno">116 </span><span class="sd">        &quot;&quot;&quot;</span>
<span class="lineno">117 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_limb</span><span class="o">.</span><span class="n">move_to_neutral</span><span class="p">()</span>
</pre></div>
<p>The <code>move_to_neutral()</code> method of the limb interface, moves all the joints to their neutral pose. This method employs the position controller to send the joints to a pre-defined neutral position.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">119 </span>    <span class="k">def</span> <span class="nf">attach_springs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="lineno">120 </span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="lineno">121 </span><span class="sd">        Switches to joint torque mode and attached joint springs to current</span>
<span class="lineno">122 </span><span class="sd">        joint positions.</span>
<span class="lineno">123 </span><span class="sd">        &quot;&quot;&quot;</span>
<span class="lineno">124 </span>        <span class="c1"># record initial joint angles</span>
<span class="lineno">125 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_start_angles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_limb</span><span class="o">.</span><span class="n">joint_angles</span><span class="p">()</span>
<span class="lineno">126 </span>
<span class="lineno">127 </span>        <span class="c1"># set control rate</span>
<span class="lineno">128 </span>        <span class="n">control_rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rate</span><span class="p">)</span>
<span class="lineno">129 </span>
<span class="lineno">130 </span>        <span class="c1"># for safety purposes, set the control rate command timeout.</span>
<span class="lineno">131 </span>        <span class="c1"># if the specified number of command cycles are missed, the robot</span>
<span class="lineno">132 </span>        <span class="c1"># will timeout and disable</span>
<span class="lineno">133 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_limb</span><span class="o">.</span><span class="n">set_command_timeout</span><span class="p">((</span><span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_missed_cmds</span><span class="p">)</span>
<span class="lineno">134 </span>
<span class="lineno">135 </span>        <span class="c1"># loop at specified rate commanding new joint torques</span>
<span class="lineno">136 </span>        <span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span>
<span class="lineno">137 </span>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rs</span><span class="o">.</span><span class="n">state</span><span class="p">()</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
<span class="lineno">138 </span>                <span class="n">rospy</span><span class="o">.</span><span class="n">logerr</span><span class="p">(</span><span class="s2">&quot;Joint torque example failed to meet &quot;</span>
<span class="lineno">139 </span>                             <span class="s2">&quot;specified control rate timeout.&quot;</span><span class="p">)</span>
<span class="lineno">140 </span>                <span class="k">break</span>
<span class="lineno">141 </span>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_forces</span><span class="p">()</span>
<span class="lineno">142 </span>            <span class="n">control_rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
</pre></div>
<p>The start angles recorded here are used by the <code>_update_forces</code> method to determine the dx, which is the displacement caused from the starting position of the joints. The <code>_update_forces</code> method is invoked at 1000Hz, which performs the spring motion as explained above.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">144 </span>    <span class="k">def</span> <span class="nf">clean_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="lineno">145 </span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="lineno">146 </span><span class="sd">        Switches out of joint torque mode to exit cleanly</span>
<span class="lineno">147 </span><span class="sd">        &quot;&quot;&quot;</span>
<span class="lineno">148 </span>        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Exiting example...&quot;</span><span class="p">)</span>
<span class="lineno">149 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_limb</span><span class="o">.</span><span class="n">exit_control_mode</span><span class="p">()</span>
<span class="lineno">150 </span>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_state</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rs</span><span class="o">.</span><span class="n">state</span><span class="p">()</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
<span class="lineno">151 </span>            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Disabling robot...&quot;</span><span class="p">)</span>
<span class="lineno">152 </span>            <span class="bp">self</span><span class="o">.</span><span class="n">_rs</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
</pre></div>
<p>The method <code>exit_control_mode()</code> of the limb interface switches to position controller mode from torque/velocity controller and saves the current joint angles as the current joint position. Finally, it checks if the robot was initially disabled and if so disables it.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">155 </span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="lineno">156 </span>    <span class="sd">&quot;&quot;&quot;RSDK Joint Torque Example: Joint Springs</span>
<span class="lineno">157 </span>
<span class="lineno">158 </span><span class="sd">    Moves the default limb to a neutral location and enters</span>
<span class="lineno">159 </span><span class="sd">    torque control mode, attaching virtual springs (Hooke&#39;s Law)</span>
<span class="lineno">160 </span><span class="sd">    to each joint maintaining the start position.</span>
<span class="lineno">161 </span>
<span class="lineno">162 </span><span class="sd">    Run this example and interact by grabbing, pushing, and rotating</span>
<span class="lineno">163 </span><span class="sd">    each joint to feel the torques applied that represent the</span>
<span class="lineno">164 </span><span class="sd">    virtual springs attached. You can adjust the spring</span>
<span class="lineno">165 </span><span class="sd">    constant and damping coefficient for each joint using</span>
<span class="lineno">166 </span><span class="sd">    dynamic_reconfigure.</span>
<span class="lineno">167 </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="lineno">168 </span>    <span class="c1"># Querying the parameter server to determine Robot model and limb name(s)</span>
<span class="lineno">169 </span>    <span class="n">rp</span> <span class="o">=</span> <span class="n">intera_interface</span><span class="o">.</span><span class="n">RobotParams</span><span class="p">()</span>
<span class="lineno">170 </span>    <span class="n">valid_limbs</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">get_limb_names</span><span class="p">()</span>
<span class="lineno">171 </span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_limbs</span><span class="p">:</span>
<span class="lineno">172 </span>        <span class="n">rp</span><span class="o">.</span><span class="n">log_message</span><span class="p">((</span><span class="s2">&quot;Cannot detect any limb parameters on this robot. &quot;</span>
<span class="lineno">173 </span>                        <span class="s2">&quot;Exiting.&quot;</span><span class="p">),</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">)</span>
<span class="lineno">174 </span>    <span class="n">robot_name</span> <span class="o">=</span> <span class="n">intera_interface</span><span class="o">.</span><span class="n">RobotParams</span><span class="p">()</span><span class="o">.</span><span class="n">get_robot_name</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="lineno">175 </span>    <span class="c1"># Parsing Input Arguments</span>
<span class="lineno">176 </span>    <span class="n">arg_fmt</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentDefaultsHelpFormatter</span>
<span class="lineno">177 </span>    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">formatter_class</span><span class="o">=</span><span class="n">arg_fmt</span><span class="p">)</span>
<span class="lineno">178 </span>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="lineno">179 </span>        <span class="s2">&quot;-l&quot;</span><span class="p">,</span> <span class="s2">&quot;--limb&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;limb&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">valid_limbs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="lineno">180 </span>        <span class="n">choices</span><span class="o">=</span><span class="n">valid_limbs</span><span class="p">,</span>
<span class="lineno">181 </span>        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;limb on which to attach joint springs&#39;</span>
<span class="lineno">182 </span>        <span class="p">)</span>
<span class="lineno">183 </span>    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">rospy</span><span class="o">.</span><span class="n">myargv</span><span class="p">()[</span><span class="mi">1</span><span class="p">:])</span>
<span class="lineno">184 </span>    <span class="c1"># Grabbing Robot-specific parameters for Dynamic Reconfigure</span>
<span class="lineno">185 </span>    <span class="n">config_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">robot_name</span><span class="p">,</span><span class="s2">&quot;JointSpringsExampleConfig&quot;</span><span class="p">])</span>
<span class="lineno">186 </span>    <span class="n">config_module</span> <span class="o">=</span> <span class="s2">&quot;intera_examples.cfg&quot;</span>
<span class="lineno">187 </span>    <span class="n">cfg</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">config_module</span><span class="p">,</span><span class="n">config_name</span><span class="p">]))</span>
<span class="lineno">188 </span>    <span class="c1"># Starting node connection to ROS</span>
<span class="lineno">189 </span>    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Initializing node... &quot;</span><span class="p">)</span>
<span class="lineno">190 </span>    <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s2">&quot;sdk_joint_torque_springs_{0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">limb</span><span class="p">))</span>
<span class="lineno">191 </span>    <span class="n">dynamic_cfg_srv</span> <span class="o">=</span> <span class="n">Server</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">config</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">config</span><span class="p">)</span>
<span class="lineno">192 </span>    <span class="n">js</span> <span class="o">=</span> <span class="n">JointSprings</span><span class="p">(</span><span class="n">dynamic_cfg_srv</span><span class="p">,</span> <span class="n">limb</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">limb</span><span class="p">)</span>
<span class="lineno">193 </span>    <span class="c1"># register shutdown callback</span>
<span class="lineno">194 </span>    <span class="n">rospy</span><span class="o">.</span><span class="n">on_shutdown</span><span class="p">(</span><span class="n">js</span><span class="o">.</span><span class="n">clean_shutdown</span><span class="p">)</span>
<span class="lineno">195 </span>    <span class="n">js</span><span class="o">.</span><span class="n">move_to_neutral</span><span class="p">()</span>
<span class="lineno">196 </span>    <span class="n">js</span><span class="o">.</span><span class="n">attach_springs</span><span class="p">()</span>
<span class="lineno">197 </span>
<span class="lineno">198 </span>
<span class="lineno">199 </span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="lineno">200 </span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
<p>The rospy node is initialized and then an instance of the dynamic reconfigure is created. As indicated above, this supplies the default and runtime, spring and dynamic constants. In custom programs this can be avoided by assigning spring and damping constants directly in the code.
</p>
</div>

<!-- 
NewPP limit report
Cached time: 20191018041805
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.076 seconds
Real time usage: 2.664 seconds
Preprocessor visited node count: 97/1000000
Preprocessor generated node count: 356/1000000
Post‐expand include size: 37/2097152 bytes
Template argument size: 1/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 30217/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.518      1 Template:TOClimit
100.00%    0.518      1 -total
-->
</div>
<!-- Saved in parser cache with key interasdk:pcache:idhash:66-0!canonical and timestamp 20191018041802 and revision id 1172
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Joint_Torque_Springs_Example&amp;oldid=1172">http://sdk.rethinkrobotics.com/intera/a/index.php?title=Joint_Torque_Springs_Example&amp;oldid=1172</a>"</div>

            <div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>            <!-- end content -->

                        <div class="visualClear"></div>
        </div><!--/#bodyContent-->
    </div> <!-- /mainContent -->
</div><!--/.bg-wrapper
<!-- end fragment mainContent --></div><!-- /mBody --><div class="visualClear"></div><!-- start fragment footer -->        <div id="footer" role="contentinfo">
                <div id="f-poweredbyico">
                            <a href="http://www.mediawiki.org/"><img src="http://sdk.rethinkrobotics.com/intera/a/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/intera/a/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /intera/a/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>                    </div>
            <ul id="f-list">
                            <li id="copywrite_notice">&copy; 2019 Rethink Robotics. All rights reserved.</li>
                            <li id="special_pages"><a href="http://sdk.rethinkrobotics.com/intera/⧼specialPagePage⧽" title="⧼specialPagePage⧽">Special page</a></li>
                            <li id="privacy"><a href="http://sdk.rethinkrobotics.com/intera/Intera_SDK:Privacy_policy" title="Intera SDK:Privacy policy">Privacy policy</a></li>
                            <li id="about"><a href="http://sdk.rethinkrobotics.com/intera/Intera_SDK:About" title="Intera SDK:About">About Intera SDK</a></li>
                            <li id="disclaimer"><a href="http://sdk.rethinkrobotics.com/intera/Intera_SDK:General_disclaimer" title="Intera SDK:General disclaimer">Disclaimers</a></li>
                    </ul><!--/#f-list-->
    </div><!-- end fragment footer --></div><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.076","walltime":"2.664","ppvisitednodes":{"value":97,"limit":1000000},"ppgeneratednodes":{"value":356,"limit":1000000},"postexpandincludesize":{"value":37,"limit":2097152},"templateargumentsize":{"value":1,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":30217,"limit":5000000},"timingprofile":["100.00%    0.518      1 Template:TOClimit","100.00%    0.518      1 -total"]},"cachereport":{"timestamp":"20191018041805","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":43});});</script></body>
<!-- Mirrored from sdk.rethinkrobotics.com/intera/a/index.php?title=Joint_Torque_Springs_Example&oldid=1172 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 18 Oct 2019 05:23:03 GMT -->
</html>