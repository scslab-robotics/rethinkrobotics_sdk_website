<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from sdk.rethinkrobotics.com/intera/a/index.php?title=Time_and_NTP&oldid=1555 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 18 Oct 2019 05:07:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Time and NTP - Intera SDK</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Time_and_NTP","wgTitle":"Time and NTP","wgCurRevisionId":1555,"wgRevisionId":1555,"wgArticleId":214,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Time_and_NTP","wgRelevantArticleId":214,"wgRequestId":"bfcbcec305e51a36bf02e83c","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","site":"ready","user.options":"ready","user.tokens":"loading","ext.pygments":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.cavendishrr":"ready"});mw.loader.implement("user.tokens@09sx7ae",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","cavendishrr.html","app.js"]);});</script>
<link rel="stylesheet" href="load8c61.css?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cskins.cavendishrr&amp;only=styles&amp;skin=cavendishrr"/>
<script async="" src="loada191.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=cavendishrr"></script>
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,300italic,400,500,500italic,700|Roboto+Condensed:300,700|Open+Sans:300"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load8ac3.css?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=cavendishrr"/>
<meta name="generator" content="MediaWiki 1.31.0"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="shortcut icon" href="http://sdk.rethinkrobotics.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://sdk.rethinkrobotics.com/intera/a/opensearch_desc.php" title="Intera SDK (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="http://sdk.rethinkrobotics.com/intera/a/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="Intera SDK Atom feed" href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/intera/a/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=CavendishRR&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Time_and_NTP rootpage-Time_and_NTP skin-cavendishrr action-view"><div id="container"><!-- start fragment header -->
    <div id="header" class="noprint">
            <a name="top" id="contentTop"></a>

            <!-- Logo + site name -->
            <h1>
                <a href="http://sdk.rethinkrobotics.com/intera/Main_Page" style="text-indent: 2em; width: 123px; height: 69px; background: transparent url(http://sdk.rethinkrobotics.com/intera/a/skins/CavendishRR/styles/images/header_logo.png) no-repeat scroll;" title="Visit the main page">&nbsp;</a>            </h1>

            <div id="rr_ActionWrap">
                <!-- Account action links -->
                <div id="accountActions"><a href="http://sdk-accounts.rethinkrobotics.com/public/NewUser">Create account</a><a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Special:UserLogin&amp;returnto=Time+and+NTP&amp;returntoquery=oldid%3D1555">Log in</a></div>                <!-- Search box -->
                        <form action="http://sdk.rethinkrobotics.com/intera/a/index.php" id="searchform">
            <label for="searchInput">Search</label>
            <input type='hidden' name="title" value="Special:Search"/>
            <input type="search" name="search" placeholder="Search Intera SDK" title="Search Intera SDK [f]" accesskey="f" id="searchInput"/>
                            <button type="submit" name="button">Search</button>        </form>
                </div><!--/#rr_ActionWrap-->
    </div> <!-- End header div -->
<!-- end fragment header --><div id="mBody"><!-- start fragment mainContent -->
<!-- start fragment firstHeader -->
<div id="firstHeadingDiv" class="firstHeading">
    <div class="l-container">
        <!-- Content action buttons -->
                <ul class="m-cactions">
            <li><a href="#">More</a>
                <ul>
                <li id="ca-viewsource"><a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Time_and_NTP&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li id="ca-history"><a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Time_and_NTP&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>                </ul>
            </li>

            <li id="ca-nstab-main" class="selected"><a href="http://sdk.rethinkrobotics.com/intera/Time_and_NTP" title="View the content page [c]" accesskey="c">Page</a></li>        </ul>
        
        <h1 lang="en">
            <span dir="auto">Time and NTP</span>
        </h1>
    </div><!--/.l-container-->
</div><!--/#firstHeadingDiv-->
<!-- end fragment firstHeader -->
<div class="bg-wrapper clearfix">
    <!-- start fragment sidebar -->
    <div id="side" class="noprint" > <!-- cavendishmw: s/column-one/side/ -->
        <ul id="nav">
                  <li>
          <span>Installation &amp; Configuration</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-Robot-Setup"><a href="http://sdk.rethinkrobotics.com/intera/Robot_Setup">Robot Setup</a></li>                                    <li id="n-Workstation-Setup"><a href="http://sdk.rethinkrobotics.com/intera/Workstation_Setup">Workstation Setup</a></li>                                    <li id="n-Networking"><a href="http://sdk.rethinkrobotics.com/intera/Networking">Networking</a></li>                                    <li id="n-Hello-Robot.21"><a href="http://sdk.rethinkrobotics.com/intera/Hello_Robot">Hello Robot!</a></li>                                    <li id="n-Hardware-Components"><a href="http://sdk.rethinkrobotics.com/intera/Hardware_Components">Hardware Components</a></li>                                    <li id="n-SDK-Workstation-Requirements"><a href="http://sdk.rethinkrobotics.com/intera/System_requirements">SDK Workstation Requirements</a></li>                                    <li id="n-Robot-Workspace-Guidelines"><a href="http://sdk.rethinkrobotics.com/intera/Workspace_Guidelines">Robot Workspace Guidelines</a></li>                                    <li id="n-Field-Service-Menu-.28FSM.29"><a href="http://sdk.rethinkrobotics.com/intera/Field_Service_Menu_(FSM)">Field Service Menu (FSM)</a></li>                                    <li id="n-Time-and-NTP"><a href="http://sdk.rethinkrobotics.com/intera/Time_and_NTP">Time and NTP</a></li>                                    <li id="n-SDK-Software-Update"><a href="http://sdk.rethinkrobotics.com/intera/Software_Update">SDK Software Update</a></li>                                    <li id="n-SDK-Release-Notes"><a href="http://sdk.rethinkrobotics.com/intera/Release-Changes">SDK Release Notes</a></li>                            </ul>
                </li>
          <li>
          <span>Concepts</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-SDK-Robot-Workstation-Overview"><a href="http://sdk.rethinkrobotics.com/intera/SDK_System_Overview">SDK Robot-Workstation Overview</a></li>                                    <li id="n-E-STOP-and-Enable-Robot"><a href="http://sdk.rethinkrobotics.com/intera/E-STOP_and_Enable_Robot">E-STOP and Enable Robot</a></li>                                    <li id="n-Arm-Calibration"><a href="http://sdk.rethinkrobotics.com/intera/Arm_Calibration">Arm Calibration</a></li>                                    <li id="n-Arm-Control-Systems"><a href="http://sdk.rethinkrobotics.com/intera/Arm_Control_Systems">Arm Control Systems</a></li>                                    <li id="n-API-Reference"><a href="http://sdk.rethinkrobotics.com/intera/API_Reference">API Reference</a></li>                            </ul>
                </li>
          <li>
          <span>Tutorials</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-Interaction-Control-Tutorial"><a href="http://sdk.rethinkrobotics.com/intera/Interaction_Control_Tutorial">Interaction Control Tutorial</a></li>                                    <li id="n-Motion-Interface-Tutorial"><a href="http://sdk.rethinkrobotics.com/intera/Motion_Interface_Tutorial">Motion Interface Tutorial</a></li>                                    <li id="n-MoveIt.21-Tutorial"><a href="http://sdk.rethinkrobotics.com/intera/MoveIt_Tutorial">MoveIt! Tutorial</a></li>                                    <li id="n-Gazebo-Tutorial"><a href="http://sdk.rethinkrobotics.com/intera/Gazebo_Tutorial">Gazebo Tutorial</a></li>                            </ul>
                </li>
          <li>
          <span>Code Examples</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-Running-Examples-Overview"><a href="http://sdk.rethinkrobotics.com/intera/Running_Examples_Overview">Running Examples Overview</a></li>                                    <li id="n-Camera-Image-Display-Example"><a href="http://sdk.rethinkrobotics.com/intera/Camera_Image_Display_Example">Camera Image Display Example</a></li>                                    <li id="n-Gripper-Example"><a href="http://sdk.rethinkrobotics.com/intera/Gripper_Example">Gripper Example</a></li>                                    <li id="n-Gripper-Cuff-Control-Example"><a href="http://sdk.rethinkrobotics.com/intera/Gripper_Cuff_Control_Example">Gripper Cuff Control Example</a></li>                                    <li id="n-Head-Display-Image-Example"><a href="http://sdk.rethinkrobotics.com/intera/Head_Display_Image_Example">Head Display Image Example</a></li>                                    <li id="n-Head-Movement-Example"><a href="http://sdk.rethinkrobotics.com/intera/Head_Movement_Example">Head Movement Example</a></li>                                    <li id="n-Lights-Blinking-Example"><a href="http://sdk.rethinkrobotics.com/intera/Lights_Blinking_Example">Lights Blinking Example</a></li>                                    <li id="n-IK-Service-Example"><a href="http://sdk.rethinkrobotics.com/intera/IK_Service_Example">IK Service Example</a></li>                                    <li id="n-Joint-Position-Example"><a href="http://sdk.rethinkrobotics.com/intera/Joint_Position_Example">Joint Position Example</a></li>                                    <li id="n-Joint-Position-Waypoint-Example"><a href="http://sdk.rethinkrobotics.com/intera/Joint_Position_Waypoint_Example">Joint Position Waypoint Example</a></li>                                    <li id="n-Joint-Torque-Springs-Example"><a href="http://sdk.rethinkrobotics.com/intera/Joint_Torque_Springs_Example">Joint Torque Springs Example</a></li>                                    <li id="n-Joint-Trajectory-Playback-Example"><a href="http://sdk.rethinkrobotics.com/intera/Joint_Trajectory_Playback_Example">Joint Trajectory Playback Example</a></li>                                    <li id="n-Set-Interaction-Options-Example"><a href="http://sdk.rethinkrobotics.com/intera/Set_Interaction_Options_Example">Set Interaction Options Example</a></li>                                    <li id="n-Motion-Interface-Go-To-Joint-Angles"><a href="http://sdk.rethinkrobotics.com/intera/Go_To_Joint_Angles_Example">Motion Interface Go-To-Joint Angles</a></li>                            </ul>
                </li>
          <li>
          <span>Support</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-User-Forum"><a href="http://sdk.rethinkrobotics.com/intera/User_Forum">User Forum</a></li>                            </ul>
                </li>
          <li>
          <span>Tools</span>

                    <ul class="collapsible-collapsed">
                                    <li id="n-All-Pages"><a href="http://sdk.rethinkrobotics.com/intera/Special:AllPages">All Pages</a></li>                                    <li id="n-Print"><a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Time_and_NTP&amp;printable=yes" rel="nofollow">Print</a></li>                                    <li id="n-Upload-File"><a href="http://sdk.rethinkrobotics.com/intera/Special:Upload">Upload File</a></li>                                    <li id="n-What-Links-Here.3F"><a href="http://sdk.rethinkrobotics.com/intera/Special:WhatLinksHere">What Links Here?</a></li>                            </ul>
                </li>
            </ul> <!-- /nav -->
    </div> <!-- /side -->
<!-- end fragment sidebar -->
    <div id="mainContent"> <!-- cavendishmw: s/column-content/mainContent/ -->
        
        <div id="bodyContent" class="mw-body">

            <div id="contentSub">
                <div class="mw-revision"><div id="mw-revision-info">Revision as of 17:44, 28 February 2018 by <a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=User:Imcmahon&amp;action=edit&amp;redlink=1" class="new mw-userlink" title="User:Imcmahon (page does not exist)"><bdi>Imcmahon</bdi></a> <span class="mw-usertoollinks">(<a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=User_talk:Imcmahon&amp;action=edit&amp;redlink=1" class="new mw-usertoollinks-talk" title="User talk:Imcmahon (page does not exist)">talk</a> | <a href="http://sdk.rethinkrobotics.com/intera/Special:Contributions/Imcmahon" class="mw-usertoollinks-contribs" title="Special:Contributions/Imcmahon">contribs</a>)</span></div><div id="mw-revision-nav">(<a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Time_and_NTP&amp;diff=prev&amp;oldid=1555" title="Time and NTP">diff</a>) <a href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Time_and_NTP&amp;direction=prev&amp;oldid=1555" title="Time and NTP">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>            </div>

            
            
                            <div id="jump-to-nav" class="mw-jump">
                    Jump to:                    <a href="#column-one">navigation</a>
                    ,                     <a href="#searchInput">search</a>
                </div>
            
            <!-- start content -->
            <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div class="title-block">
<p><span style="font-size:120%;"><b>Robot Time and NTP&#160;: The Network Time Protocol (<a rel="nofollow" class="external text" href="http://networktimefoundation.org/projects/ntp-project/">NTP</a>) is run on the robot to keep the robot's system time accurate and synchronized.</b></span>
</p>
</div>
<div class="toclimit-2"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Overview"><span class="tocnumber">2</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#NTP_on_Sawyer"><span class="tocnumber">2.1</span> <span class="toctext">NTP on Sawyer</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Timezone"><span class="tocnumber">2.2</span> <span class="toctext">Timezone</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#How_to_Use_NTP"><span class="tocnumber">3</span> <span class="toctext">How to Use NTP</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#How_to_Check_Robot_Time"><span class="tocnumber">3.1</span> <span class="toctext">How to Check Robot Time</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Compare_Reference_Time"><span class="tocnumber">3.1.1</span> <span class="toctext">Compare Reference Time</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#How_to_Fix_Robot_Time"><span class="tocnumber">3.2</span> <span class="toctext">How to Fix Robot Time</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Default_Operation"><span class="tocnumber">3.2.1</span> <span class="toctext">Default Operation</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Setting_the_Time_on_Boot"><span class="tocnumber">3.2.2</span> <span class="toctext">Setting the Time on Boot</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Configuration"><span class="tocnumber">4</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#DHCP"><span class="tocnumber">4.1</span> <span class="toctext">DHCP</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Running_Locally_with_DHCP"><span class="tocnumber">4.1.1</span> <span class="toctext">Running Locally with DHCP</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Resources"><span class="tocnumber">5</span> <span class="toctext">Resources</span></a></li>
</ul>
</div>
</div>
<div class="content-block">
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>By default, your robot will automatically use NTP to synchronize its system clock when connected to the internet.  Large offsets are corrected at boot, while small inaccuracies are handled gradually during run-time.
</p><p>To correct your robot's time, reboot your robot while having it connected to the internet.
</p><p>You can check the time on the robot with the <code>ntpdate</code> tool:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>    $ ntpdate -q &lt;robot_address&gt;
    server <span class="m">192</span>.168.0.1, stratum <span class="m">2</span>, offset -0.000680, delay <span class="m">0</span>.03934
    <span class="m">5</span> Oct <span class="m">18</span>:32:31 ntpdate<span class="o">[</span><span class="m">7238</span><span class="o">]</span>: adjust <span class="nb">time</span> server <span class="m">192</span>.168.52.242 offset -0.000680 sec
</pre></div>
<p>This will tell you the difference between your computer's time (the time on the left) and the robot's system clock.
</p><p>If you cannot connect your Sawyer to the internet or need to set a custom configuration, see the <a href="http://sdk.rethinkrobotics.com/intera/Time_and_NTP#Configuration" title="Time and NTP">Configuration</a> Section.
</p>
</div>
<div class="content-block">
<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<p>Sawyer's on-board time is kept accurate using the standard <a rel="nofollow" class="external text" href="http://networktimefoundation.org/projects/ntp-project/">NTP</a> time service.  The default configuration will set the robot's time once during startup each time the robot boots, and then will maintain a running NTP server that will gradually slew the time to keep the robot's system time in sync.  The default time servers are received from pool.ntp.org, but these can be configured by either providing the <code>NTP Servers</code> field of the <a href="http://sdk.rethinkrobotics.com/intera/Field_Service_Menu_(FSM)#Menu_Functions" title="Field Service Menu (FSM)">Configuration Menu in the FSM</a> from your DHCP host.
</p>
<h3><span class="mw-headline" id="NTP_on_Sawyer">NTP on Sawyer</span></h3>
<p>NTP runs automatically on Sawyer in two parts:
</p>
<ol><li>The <code>ntp-client</code> script runs on boot to <b>correct large time offsets.</b></li>
<li>The <code>ntpd</code> service then runs an NTP timeserver to gradually keep the time accurate for <b>small time differences</b>.</li></ol>
<p>The final important piece is the <code>ntp.conf</code> configuration used for both these services.  This determines which reference time servers the robot should use to synchronize against.
</p><p>Default settings should work for most people to keep Sawyer's time accurate.  Users can query the status of the robot's NTP timeserver using various NTP tools including: ntpdate, and ntpq.
</p><p>For the advanced users, the above NTP services can be <a href="http://sdk.rethinkrobotics.com/intera/Time_and_NTP#Configuration" title="Time and NTP">configured</a> using DHCP.
</p>
<h3><span class="mw-headline" id="Timezone">Timezone</span></h3>
<p>NTP will sync your robot's time to "real-world" time, but you still need to set the robot's timezone.  The robot's timezone can be set using the <a href="http://sdk.rethinkrobotics.com/intera/Field_Service_Menu_(FSM)" title="Field Service Menu (FSM)">Field-Service-Menu</a>.  This does not affect the time kept by NTP as that will be based on UTC, however it will affect the offset used for the displayed system time.
</p>
</div>
<div class="content-block">
<h2><span class="mw-headline" id="How_to_Use_NTP">How to Use NTP</span></h2>
<h3><span class="mw-headline" id="How_to_Check_Robot_Time">How to Check Robot Time</span></h3>
<p>You can use the <a rel="nofollow" class="external text" href="http://www.eecis.udel.edu/~mills/ntp/html/ntpdate.html">ntpdate</a> tool for a simple reference check against the robot, or use the ntpq tool to check the status of the NTP timeserver and Sawyer's synchronization, among other details.
Make sure you have installed the ntp tools:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>    $ sudo apt-get install ntp
</pre></div>
<p>Query the status of the NTP server on the robot:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>    $ ntpq -p &lt;robot_address&gt;  
         remote           refid      st t when poll reach   delay   offset  <span class="nv">jitter</span>
    <span class="o">==============================================================================</span>
*server2.shellva <span class="m">128</span>.59.39.48     <span class="m">2</span> u <span class="m">1712</span> <span class="m">1024</span>  <span class="m">376</span>   <span class="m">10</span>.225    <span class="m">1</span>.013   <span class="m">3</span>.852
*173.44.32.10    <span class="m">96</span>.237.191.14    <span class="m">2</span> u   <span class="m">42</span> <span class="m">1024</span>  <span class="m">217</span>   <span class="m">52</span>.744   -7.044  <span class="m">10</span>.286
     kona.skafari.co <span class="m">209</span>.51.161.238   <span class="m">2</span> u <span class="m">1694</span> <span class="m">1024</span>  <span class="m">376</span>    <span class="m">8</span>.558   -1.378  <span class="m">16</span>.680
*sisdb01.muskego <span class="m">50</span>.18.44.198     <span class="m">3</span> u  <span class="m">358</span> <span class="m">1024</span>  <span class="m">377</span>   <span class="m">35</span>.632   -3.661   <span class="m">7</span>.991
</pre></div>
<p>This lists the known synchronization references (and their "refid" references) of the robot’s ntp server.  These are the servers and peer timeservers that the robot’s NTP daemon/server is trying to sync against.
The first character in a row indicates the current Selection status (‘*’ means active). See ‘Select Field’: <a rel="nofollow" class="external free" href="http://www.eecis.udel.edu/~mills/ntp/html/decode.html#peer">http://www.eecis.udel.edu/~mills/ntp/html/decode.html#peer</a>
</p>
<h5><span class="mw-headline" id="Compare_Reference_Time">Compare Reference Time</span></h5>
<p>You can compare the robot's time to your system's time using the <code>-q</code> ntpdate command:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>    $ ntpdate -q &lt;robot_ip&gt;
</pre></div>
<h3><span class="mw-headline" id="How_to_Fix_Robot_Time">How to Fix Robot Time</span></h3>
<p>Robot time is fixed by connecting the robot to timeservers.  This must happen at boot for large offsets.  Smaller inaccuracies (~17min) are handled regularly during run-time.
</p>
<h4><span class="mw-headline" id="Default_Operation">Default Operation</span></h4>
<p>By default the NTP services are configured to get four servers from the <a rel="nofollow" class="external text" href="http://www.pool.ntp.org/">NTP Pool Project</a> at pool.ntp.org.  On boot, if the robot can reach these servers -- i.e. if the robot can connect to the internet -- the <code>ntp-client</code> corrects the robot's time, setting it to the reference time from the servers in one big jump.  After this the robot's <code>ntpd</code> timeserver will continue to synchronize against these servers.
</p>
<h4><span class="mw-headline" id="Setting_the_Time_on_Boot">Setting the Time on Boot</span></h4>
<p>In order to set large offsets, the boot-time <code>ntp-client</code> need to be able to connect to the configured NTP servers.  If using the default settings, this just means the robot can reach the internet.  If your robot cannot connect to the internet, or you wish to use different servers during boot time, you can provide those servers using the <code>NTP Servers</code> field of the <a href="http://sdk.rethinkrobotics.com/intera/Field_Service_Menu_(FSM)#Menu_Functions" title="Field Service Menu (FSM)">Configuration Menu in the FSM</a>.
Once the robot has accurate time, it will save that time to the hardware clock on shutdown.
</p>
</div>
<div class="content-block">
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="DHCP">DHCP</span></h3>
<p>Using DHCP to provide the <code>ntp-servers</code> option is the standard way to provide NTP configuration information on a network.  Your local network may already be configured to provide this information.
</p><p>From <a rel="nofollow" class="external text" href="http://www.ietf.org/rfc/rfc2132.txt">DHCP Options and BOOTP Vendor Extensions</a>:
</p>
<blockquote>
<p>   8.3. Network Time Protocol Servers Option<br />
<br />
   This option specifies a list of IP addresses indicating NTP [18]<br />
   servers available to the client.  Servers SHOULD be listed in order<br />
   of preference.<br />
</p>
</blockquote>
<p>-- <a rel="nofollow" class="external free" href="http://www.ietf.org/rfc/rfc2132.txt">http://www.ietf.org/rfc/rfc2132.txt</a>
</p>
<h4><span class="mw-headline" id="Running_Locally_with_DHCP">Running Locally with DHCP</span></h4>
<p>If you need to correct the time locally (without being on a network), you can setup your own DHCP server on a local machine with a tool such as <code>isc-dhcp-server</code>.  Make sure to run an NTP server on your own machine and provide the address of your machine as the address in the <code>NTP Servers</code> <a href="http://sdk.rethinkrobotics.com/intera/Field_Service_Menu_(FSM)#Menu_Functions" title="Field Service Menu (FSM)">field in the Configuration Menu of the FSM</a>.  
</p><p>If your dev machine is not connected to other authentic time servers, you will need to <code>fudge</code> your own local time as a valid source of authentication.  By default, NTP does not sync against stratum 16 servers (which is what a disconnected server is). "Stratum" indicates the number of hops you are away from a 'true' time source (stratum 1), such as a GPS based device.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># editing your workstation&#39;s /etc/ntp.conf</span>
<span class="c1"># remove or comment out your workstation&#39;s references to other NTP servers or NTP pools</span>

<span class="c1"># add backup fake local server </span>
server <span class="m">127</span>.127.1.0 iburst      <span class="c1"># use local clock of sdk workstation as the server, burst synchronize</span>
fudge <span class="m">127</span>.127.1.0  stratum <span class="m">10</span>  <span class="c1"># &quot;fake&quot; sdk workstation as a stratum 10 NTP server (rather than the default and invalid stratum 16)</span>

<span class="c1"># set permissions to use your computer as an NTP server</span>
restrict -4 default kod notrap nomodify nopeer limited  <span class="c1"># remove the default &quot;noquery&quot; options to allow others on the LAN to see the NTP server</span>
restrict -6 default kod notrap nomodify nopeer limited  <span class="c1"># ditto</span>

<span class="c1"># optionally broadcast your IP address to the network</span>
broadcast &lt;your&gt;.&lt;ip&gt;.&lt;address&gt;.&lt;here&gt;
</pre></div>
</div>
<div class="content-block">
<h2><span class="mw-headline" id="Resources">Resources</span></h2>
<ul><li>ntpq - standard NTP query program:</li></ul>
<pre> <a rel="nofollow" class="external free" href="http://www.eecis.udel.edu/~mills/ntp/html/ntpq.html">http://www.eecis.udel.edu/~mills/ntp/html/ntpq.html</a>
</pre>
<ul><li>ntpd - Network Time Protocol (NTP) daemon:</li></ul>
<pre> <a rel="nofollow" class="external free" href="http://www.eecis.udel.edu/~mills/ntp/html/ntpd.html">http://www.eecis.udel.edu/~mills/ntp/html/ntpd.html</a>
</pre>
<ul><li>Command Index - (all the commands available in the ntp.conf configuration file and the ntpdc(/future ntpq versions) tools:</li></ul>
<pre> <a rel="nofollow" class="external free" href="http://www.eecis.udel.edu/~mills/ntp/html/comdex.html">http://www.eecis.udel.edu/~mills/ntp/html/comdex.html</a>
</pre>
</div>

<!-- 
NewPP limit report
Cached time: 20191018041212
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.033 seconds
Real time usage: 0.775 seconds
Preprocessor visited node count: 121/1000000
Preprocessor generated node count: 226/1000000
Post‐expand include size: 37/2097152 bytes
Template argument size: 1/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 3467/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.490      1 Template:TOClimit
100.00%    0.490      1 -total
-->
</div>
<!-- Saved in parser cache with key interasdk:pcache:idhash:214-0!canonical and timestamp 20191018041211 and revision id 1555
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://sdk.rethinkrobotics.com/intera/a/index.php?title=Time_and_NTP&amp;oldid=1555">http://sdk.rethinkrobotics.com/intera/a/index.php?title=Time_and_NTP&amp;oldid=1555</a>"</div>

            <div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>            <!-- end content -->

                        <div class="visualClear"></div>
        </div><!--/#bodyContent-->
    </div> <!-- /mainContent -->
</div><!--/.bg-wrapper
<!-- end fragment mainContent --></div><!-- /mBody --><div class="visualClear"></div><!-- start fragment footer -->        <div id="footer" role="contentinfo">
                <div id="f-poweredbyico">
                            <a href="http://www.mediawiki.org/"><img src="http://sdk.rethinkrobotics.com/intera/a/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/intera/a/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /intera/a/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>                    </div>
            <ul id="f-list">
                            <li id="copywrite_notice">&copy; 2019 Rethink Robotics. All rights reserved.</li>
                            <li id="special_pages"><a href="http://sdk.rethinkrobotics.com/intera/⧼specialPagePage⧽" title="⧼specialPagePage⧽">Special page</a></li>
                            <li id="privacy"><a href="http://sdk.rethinkrobotics.com/intera/Intera_SDK:Privacy_policy" title="Intera SDK:Privacy policy">Privacy policy</a></li>
                            <li id="about"><a href="http://sdk.rethinkrobotics.com/intera/Intera_SDK:About" title="Intera SDK:About">About Intera SDK</a></li>
                            <li id="disclaimer"><a href="http://sdk.rethinkrobotics.com/intera/Intera_SDK:General_disclaimer" title="Intera SDK:General disclaimer">Disclaimers</a></li>
                    </ul><!--/#f-list-->
    </div><!-- end fragment footer --></div><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.033","walltime":"0.775","ppvisitednodes":{"value":121,"limit":1000000},"ppgeneratednodes":{"value":226,"limit":1000000},"postexpandincludesize":{"value":37,"limit":2097152},"templateargumentsize":{"value":1,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":3467,"limit":5000000},"timingprofile":["100.00%    0.490      1 Template:TOClimit","100.00%    0.490      1 -total"]},"cachereport":{"timestamp":"20191018041212","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":42});});</script></body>
<!-- Mirrored from sdk.rethinkrobotics.com/intera/a/index.php?title=Time_and_NTP&oldid=1555 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 18 Oct 2019 05:07:45 GMT -->
</html>